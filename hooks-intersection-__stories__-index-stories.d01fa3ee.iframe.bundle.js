"use strict";(self.webpackChunk_sima_land_ui_nucleons=self.webpackChunk_sima_land_ui_nucleons||[]).push([[5463],{"./src/hooks/intersection/__stories__/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/colors/index.ts"),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/intersection/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"hooks/useIntersection",component:___WEBPACK_IMPORTED_MODULE_2__.s,parameters:{storySource:{source:"import { CSSProperties, useMemo, useRef, useState } from 'react';\nimport { COLORS } from '../../../colors';\nimport { useIntersection } from '..';\nexport default {\n  title: 'hooks/useIntersection',\n  component: useIntersection,\n  parameters: {\n    layout: 'padded'\n  }\n};\nconst gridStyle: CSSProperties = {\n  maxWidth: '1024px',\n  margin: '0 auto',\n  display: 'grid',\n  gridTemplateColumns: 'repeat(4, 1fr)',\n  gap: '8px',\n  padding: '8px'\n};\nconst titleStyle: CSSProperties = {\n  gridRow: '1',\n  gridColumn: '1 / 5'\n};\nfunction Square() {\n  const ref = useRef<HTMLDivElement>(null);\n  const [viewing, toggleViewing] = useState<boolean>(false);\n\n  // Важно: используем useMemo чтобы не пересоздавать observer при каждом рендере\n  const options = useMemo<IntersectionObserverInit>(() => ({\n    threshold: 1\n  }), []);\n  useIntersection(ref, ({\n    isIntersecting\n  }) => {\n    toggleViewing(isIntersecting);\n  }, options);\n  const style: CSSProperties = {\n    aspectRatio: '1 / 1',\n    background: COLORS.get('basic-gray12'),\n    borderRadius: '8px',\n    transition: 'background 0.2s ease-in-out',\n    ...(viewing && {\n      background: COLORS.get('basic-blue')\n    })\n  };\n  return <div ref={ref} style={style} />;\n}\nexport function Primary() {\n  return <>\n      <div style={gridStyle}>\n        <h3 style={titleStyle}>Квадраты, которые полностью видны будут синими</h3>\n        {[...Array(500).keys()].map(index => <Square key={index} />)}\n      </div>\n    </>;\n}\nPrimary.storyName = 'Простой пример';\nPrimary.parameters = {\n  ...Primary.parameters,\n  docs: {\n    ...Primary.parameters?.docs,\n    source: {\n      originalSource: \"function Primary() {\\n  return <>\\n      <div style={gridStyle}>\\n        <h3 style={titleStyle}>\\u041A\\u0432\\u0430\\u0434\\u0440\\u0430\\u0442\\u044B, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0435 \\u043F\\u043E\\u043B\\u043D\\u043E\\u0441\\u0442\\u044C\\u044E \\u0432\\u0438\\u0434\\u043D\\u044B \\u0431\\u0443\\u0434\\u0443\\u0442 \\u0441\\u0438\\u043D\\u0438\\u043C\\u0438</h3>\\n        {[...Array(500).keys()].map(index => <Square key={index} />)}\\n      </div>\\n    </>;\\n}\",\n      ...Primary.parameters?.docs?.source\n    }\n  }\n};",locationsMap:{primary:{startLoc:{col:7,line:47},endLoc:{col:1,line:54},startBody:{col:7,line:47},endBody:{col:1,line:54}}}},layout:"padded"}},gridStyle={maxWidth:"1024px",margin:"0 auto",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",padding:"8px"},titleStyle={gridRow:"1",gridColumn:"1 / 5"};function Square(){const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[viewing,toggleViewing]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),options=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({threshold:1})),[]);(0,___WEBPACK_IMPORTED_MODULE_2__.s)(ref,(({isIntersecting})=>{toggleViewing(isIntersecting)}),options);const style={aspectRatio:"1 / 1",background:_colors__WEBPACK_IMPORTED_MODULE_1__.D.get("basic-gray12"),borderRadius:"8px",transition:"background 0.2s ease-in-out",...viewing&&{background:_colors__WEBPACK_IMPORTED_MODULE_1__.D.get("basic-blue")}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{ref,style})}Square.displayName="Square";const Primary=function Primary(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{style:gridStyle,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("h3",{style:titleStyle,children:"Квадраты, которые полностью видны будут синими"}),[...Array(500).keys()].map((index=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Square,{},index)))]})})};Primary.storyName="Простой пример",Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"function Primary() {\n  return <>\n      <div style={gridStyle}>\n        <h3 style={titleStyle}>Квадраты, которые полностью видны будут синими</h3>\n        {[...Array(500).keys()].map(index => <Square key={index} />)}\n      </div>\n    </>;\n}",...Primary.parameters?.docs?.source}}};const __namedExportsOrder=["Primary"]},"./src/colors/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>COLORS});const COLORS=new Map(Object.entries({"basic-blue":"#1f84db","basic-gray87":"#212121","basic-gray76":"#3a3a3b","basic-gray66":"#545455","basic-gray54":"#757575","basic-gray38":"#9e9e9e","basic-gray24":"#c2c2c2","basic-gray12":"#e0e0e0","basic-gray8":"#ebebeb","basic-gray4":"#f5f5f5","basic-gray2":"#fafafa","basic-white":"#fff","additional-deep-red":"#d50000","additional-red":"#fb3a2f","additional-light-red":"#feebea","additional-dark-teal":"#089176","additional-teal":"#09ab8b","additional-green":"#00c853","additional-light-green":"#64dd17","additional-lime":"#aeea00","additional-faded-green":"#eff9ea","additional-pink":"#e82e5c","additional-purple":"#b52ea8","additional-violet":"#902bd0","additional-deep-purple":"#634bdf","additional-electric-blue":"#2962ff","additional-light-blue":"#0091ea","additional-cyan":"#00b8d4","additional-sky":"#e4f1f9","additional-deep-orange":"#ff7200","additional-amber":"#ffab00","additional-yellow":"#ffd600","additional-gold":"#d5a43b","additional-brown":"#795548","additional-blue-gray":"#607d8b","additional-deep-blue":"#00599d","additional-dark-blue":"#002b41","additional-unlit-blue":"#1b75c2"}))},"./src/hooks/identity.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>useIdentityRef});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useIdentityRef=value=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);return ref.current=value,ref}},"./src/hooks/intersection/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useIntersection});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/identity.ts");function useIntersection(ref,callback,options){const callbackRef=(0,_identity__WEBPACK_IMPORTED_MODULE_1__.y)(callback);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const element=ref.current;if(element){const observer=new IntersectionObserver((([entry])=>{callbackRef.current?.(entry)}),options);return observer.observe(element),()=>observer.disconnect()}}),[ref,callbackRef,options])}}}]);