# Документация

Документация по компонентам и утилитам пакета `@sima-land/ui-nucleons`.

# Принцип работы

Документация по компонентам строится на модулях с примерами использования. Она представляет из-себя SPA с клиентским роутингом по параметру `?path`.

> Роутинг по get-параметру используется для простоты публикации в GitHub Pages. Он является деталью реализации и может быть заменен в будущем.

Пример использования оформляется в виде JS-модуля, соответствующего двум условиям:

- Экспорт `default` содержит React-компонент с примером использования целевого компонента
- Экспорт `meta` содержит мета-данные

Пример модуля:

```jsx
import { MyComponent } from 'my-lib/my-component/';

export const meta = {
  category: 'Компоненты/MyComponent', // Путь в меню
  title: 'Простой пример', // Название примера
};

export default function () {
  return (
    <>
      <MyComponent>Hello, world!</MyComponent>
    </>
  );
}
```

Чтобы запустить режим разработки необходимо выполнить:

```bash
npm run dev
```

Чтобы собрать документацию используется _Rspack_. Перед запуском сборки с помощью glob ищутся все модули-примеры в каталоге `/docs`.
Все найденные модули импортируются в "точку входа".

Пример точки входа:

```js
import Entry0 from '../docs/components/my-component/primary.tsx';
import Entry1 from '../docs/components/my-component/secondary.tsx';
import Entry2 from '../docs/hooks/my-hook/primary.tsx';
//...

export default [Entry0, Entry1, Entry2];
```

На основе найденных модулей строится два html-документа - документация и песочница.

Документация - страница с UI для поиска и просмотра всех найденных примеров. Примеры в документации выводятся в iframe который ссылается на песочницу.

Песочница - страница которая содержит все примеры и выводит нужный.

# To Do

- возможность определять список файлов, исходники которых надо выводить в блоке кода вместе с кодом модуля с примером (`meta.parameters.extraSources`)
- поиск по меню
- отзывчивый дизайн: на мобилах SideBar уходит
- скрывать сторисы с тестами, показывать только в "режиме разработчика" (например по `?developer=true`)
- не раскрывается выбранный список в меню по умолчанию
- блок кода справа
- отключение показа кода для конкретных сторисов
- сортировка по алфавиту
- темная тема
- редирект основного документа при редиректе в iframe
- ...
