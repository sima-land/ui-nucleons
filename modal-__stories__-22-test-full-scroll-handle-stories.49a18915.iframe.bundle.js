"use strict";(self.webpackChunk_sima_land_ui_nucleons=self.webpackChunk_sima_land_ui_nucleons||[]).push([[3714],{"./src/modal/__stories__/22-test-full-scroll-handle.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TestFullScroll:()=>TestFullScroll,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _sima_land_ui_nucleons_modal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/modal/index.tsx"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"common/Modal",component:_sima_land_ui_nucleons_modal__WEBPACK_IMPORTED_MODULE_0__.u,parameters:{storySource:{source:"import { Modal } from '@sima-land/ui-nucleons/modal';\nimport { useState } from 'react';\nexport default {\n  title: 'common/Modal',\n  component: Modal,\n  parameters: {\n    layout: 'padded'\n  }\n};\nexport function TestFullScroll() {\n  const [enabled, setEnabled] = useState(true);\n  const [count, setCount] = useState(0);\n  const onFullScroll = () => {\n    setCount(c => c + 1);\n  };\n  return <Modal footerStub={false}>\n      <Modal.Body onFullScroll={enabled ? onFullScroll : undefined}>\n        <div style={{\n        padding: '40px'\n      }}>\n          <button onClick={() => setEnabled(a => !a)}>{enabled ? 'Выключить' : 'Включить'}</button>\n          <p>({enabled ? 'Должен срабатывать' : 'Не должен срабатывать'})</p>\n\n          <p>\n            <b>Кол-во полных прокруток: {count}</b>\n          </p>\n\n          {Array(64).fill(0).map((zero, index) => <p key={index}>\n                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nesciunt similique,\n                quibusdam nostrum quis excepturi deserunt expedita. Cum eveniet ullam placeat.\n              </p>)}\n        </div>\n      </Modal.Body>\n    </Modal>;\n}\nTestFullScroll.storyName = 'Тест: onFullScroll не должен кэшироваться';\nTestFullScroll.parameters = {\n  ...TestFullScroll.parameters,\n  docs: {\n    ...TestFullScroll.parameters?.docs,\n    source: {\n      originalSource: \"function TestFullScroll() {\\n  const [enabled, setEnabled] = useState(true);\\n  const [count, setCount] = useState(0);\\n  const onFullScroll = () => {\\n    setCount(c => c + 1);\\n  };\\n  return <Modal footerStub={false}>\\n      <Modal.Body onFullScroll={enabled ? onFullScroll : undefined}>\\n        <div style={{\\n        padding: '40px'\\n      }}>\\n          <button onClick={() => setEnabled(a => !a)}>{enabled ? '\\u0412\\u044B\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C' : '\\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C'}</button>\\n          <p>({enabled ? '\\u0414\\u043E\\u043B\\u0436\\u0435\\u043D \\u0441\\u0440\\u0430\\u0431\\u0430\\u0442\\u044B\\u0432\\u0430\\u0442\\u044C' : '\\u041D\\u0435 \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0441\\u0440\\u0430\\u0431\\u0430\\u0442\\u044B\\u0432\\u0430\\u0442\\u044C'})</p>\\n\\n          <p>\\n            <b>\\u041A\\u043E\\u043B-\\u0432\\u043E \\u043F\\u043E\\u043B\\u043D\\u044B\\u0445 \\u043F\\u0440\\u043E\\u043A\\u0440\\u0443\\u0442\\u043E\\u043A: {count}</b>\\n          </p>\\n\\n          {Array(64).fill(0).map((zero, index) => <p key={index}>\\n                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nesciunt similique,\\n                quibusdam nostrum quis excepturi deserunt expedita. Cum eveniet ullam placeat.\\n              </p>)}\\n        </div>\\n      </Modal.Body>\\n    </Modal>;\\n}\",\n      ...TestFullScroll.parameters?.docs?.source\n    }\n  }\n};",locationsMap:{"test-full-scroll":{startLoc:{col:7,line:10},endLoc:{col:1,line:35},startBody:{col:7,line:10},endBody:{col:1,line:35}}}},layout:"padded"}},TestFullScroll=function TestFullScroll(){const[enabled,setEnabled]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),[count,setCount]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_sima_land_ui_nucleons_modal__WEBPACK_IMPORTED_MODULE_0__.u,{footerStub:!1,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_sima_land_ui_nucleons_modal__WEBPACK_IMPORTED_MODULE_0__.u.Body,{onFullScroll:enabled?()=>{setCount((c=>c+1))}:void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{style:{padding:"40px"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{onClick:()=>setEnabled((a=>!a)),children:enabled?"Выключить":"Включить"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("p",{children:["(",enabled?"Должен срабатывать":"Не должен срабатывать",")"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("b",{children:["Кол-во полных прокруток: ",count]})}),Array(64).fill(0).map(((zero,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nesciunt similique, quibusdam nostrum quis excepturi deserunt expedita. Cum eveniet ullam placeat."},index)))]})})})};TestFullScroll.displayName="TestFullScroll",TestFullScroll.storyName="Тест: onFullScroll не должен кэшироваться",TestFullScroll.parameters={...TestFullScroll.parameters,docs:{...TestFullScroll.parameters?.docs,source:{originalSource:"function TestFullScroll() {\n  const [enabled, setEnabled] = useState(true);\n  const [count, setCount] = useState(0);\n  const onFullScroll = () => {\n    setCount(c => c + 1);\n  };\n  return <Modal footerStub={false}>\n      <Modal.Body onFullScroll={enabled ? onFullScroll : undefined}>\n        <div style={{\n        padding: '40px'\n      }}>\n          <button onClick={() => setEnabled(a => !a)}>{enabled ? 'Выключить' : 'Включить'}</button>\n          <p>({enabled ? 'Должен срабатывать' : 'Не должен срабатывать'})</p>\n\n          <p>\n            <b>Кол-во полных прокруток: {count}</b>\n          </p>\n\n          {Array(64).fill(0).map((zero, index) => <p key={index}>\n                Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nesciunt similique,\n                quibusdam nostrum quis excepturi deserunt expedita. Cum eveniet ullam placeat.\n              </p>)}\n        </div>\n      </Modal.Body>\n    </Modal>;\n}",...TestFullScroll.parameters?.docs?.source}}};const __namedExportsOrder=["TestFullScroll"]},"./src/_internal/page-scroll-lock/adapters/body-scroll-lock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ye:()=>PageScrollLock,kI:()=>BSL_IGNORE_ATTR});var body_scroll_lock__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js");const BSL_IGNORE_ATTR="data-bsl-ignore";class PageScrollLock{constructor(element,options){this.element=element,this.options=options,this.lib={disableBodyScroll:body_scroll_lock__WEBPACK_IMPORTED_MODULE_0__.Qp,enableBodyScroll:body_scroll_lock__WEBPACK_IMPORTED_MODULE_0__.tG}}replaceLib(lib){this.lib=lib}lock(){this.lib.disableBodyScroll(this.element,{...this.options,allowTouchMove})}unlock(){this.lib.enableBodyScroll(this.element)}}const allowTouchMove=startEl=>{let el=startEl;for(;el&&el!==document.body;){if(null!==el.getAttribute(BSL_IGNORE_ATTR))return!0;el=el.parentElement}return!1}},"./src/_internal/page-scroll-lock/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{kI:()=>body_scroll_lock.kI,RA:()=>PageScrollProvider,PP:()=>usePageScrollLock});var body_scroll_lock=__webpack_require__("./src/_internal/page-scroll-lock/adapters/body-scroll-lock.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PageScrollContext=(0,react.createContext)(null),DEFAULTS={adapter:(element,options)=>new body_scroll_lock.Ye(element,options)};function PageScrollProvider({children,adapter}){if(null!==(0,react.useContext)(PageScrollContext))throw Error("PageScrollContext: only one provider allowed in jsx tree");return(0,jsx_runtime.jsx)(PageScrollContext.Provider,{value:{adapter},children})}function usePageScrollContext(){return(0,react.useContext)(PageScrollContext)||DEFAULTS}PageScrollProvider.displayName="PageScrollProvider";try{PageScrollProvider.displayName="PageScrollProvider",PageScrollProvider.__docgenInfo={description:"Провайдер реализации блокировки прокрутки.",displayName:"PageScrollProvider",props:{adapter:{defaultValue:null,description:"",name:"adapter",required:!0,type:{name:"PageScrollLockAdapterFactory"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/_internal/page-scroll-lock/context.tsx#PageScrollProvider"]={docgenInfo:PageScrollProvider.__docgenInfo,name:"PageScrollProvider",path:"src/_internal/page-scroll-lock/context.tsx#PageScrollProvider"})}catch(__react_docgen_typescript_loader_error){}try{usePageScrollContext.displayName="usePageScrollContext",usePageScrollContext.__docgenInfo={description:"Хук использования реализации блокировки прокрутки.",displayName:"usePageScrollContext",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/_internal/page-scroll-lock/context.tsx#usePageScrollContext"]={docgenInfo:usePageScrollContext.__docgenInfo,name:"usePageScrollContext",path:"src/_internal/page-scroll-lock/context.tsx#usePageScrollContext"})}catch(__react_docgen_typescript_loader_error){}const hook_DEFAULTS={lockEnabled:!0,reserveScrollBarGap:!0};function usePageScrollLock(ref,options=hook_DEFAULTS){const{adapter}=usePageScrollContext();(0,hooks.LI)((()=>{const element=ref.current;if(element&&options.lockEnabled){const pageScroll=adapter(element,options);return pageScroll.lock(),()=>pageScroll.unlock()}}),[options?.lockEnabled,options?.reserveScrollBarGap])}},"./src/helpers/layer.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>LayerProvider,s:()=>useLayer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const LayerContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(0),LayerProvider=LayerContext.Provider;function useLayer(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(LayerContext)}},"./src/helpers/on.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function on(target,eventNames,callback,options){const eventNamesList=eventNames.split(" "),wrapped=e=>callback(e);return eventNamesList.forEach((eventName=>{target.addEventListener(eventName,wrapped,options)})),()=>{eventNamesList.forEach((eventName=>{target.removeEventListener(eventName,wrapped,options)}))}}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__,on:()=>on});const __WEBPACK_DEFAULT_EXPORT__=on},"./src/hooks/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LI:()=>useIsomorphicLayoutEffect,MQ:()=>useInfiniteScroll,O3:()=>useOutsideClick});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers_on__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/on.ts"),_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/identity.ts");function useInfiniteScroll(ref,{onFullScroll,threshold=0},moreDeps){const callbackRef=(0,_identity__WEBPACK_IMPORTED_MODULE_1__.y)(onFullScroll);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const element=ref.current;if(element)return(0,_helpers_on__WEBPACK_IMPORTED_MODULE_2__.on)(element,"scroll",(event=>{const{scrollTop,clientHeight,scrollHeight}=event.target;threshold+scrollTop+clientHeight>=scrollHeight&&callbackRef.current?.(event)}))}),[ref,threshold,...moreDeps||[]])}function useOutsideClick(elementRef,callback){const innerRef=(0,_identity__WEBPACK_IMPORTED_MODULE_1__.y)(elementRef),callbackRef=(0,_identity__WEBPACK_IMPORTED_MODULE_1__.y)(callback);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>(0,_helpers_on__WEBPACK_IMPORTED_MODULE_2__.on)(document.documentElement,"click",(event=>{const arg=innerRef.current,refs=Array.isArray(arg)?arg:[arg];let isOutsideClick=!0;for(const{current:element}of refs)if(element&&event.target instanceof Node&&(element===event.target||element.contains(event.target))){isOutsideClick=!1;break}isOutsideClick&&callbackRef.current?.(event)}),{capture:!0})),[])}const useIsomorphicLayoutEffect="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect}}]);